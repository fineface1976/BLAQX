 <!DOCTYPE html>
<html>
<head>
  <base href="/BLAQX/">
  <title>BLAQX Token Platform</title>
  <style>
    /* ===== [KEEP ALL EXISTING STYLES THE SAME] ===== */
    /* Your original styles remain untouched */
    /* Add this at the end of existing styles */
    .dashboard-link {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: #0d8a8c;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <!-- [KEEP ALL EXISTING HTML] -->
  <!-- Only change the JavaScript part -->

  <script>
    // Password Toggle Function (Keep this)
    function togglePassword(fieldId) {
      const passwordField = document.getElementById(fieldId);
      passwordField.type = passwordField.type === 'password' ? 'text' : 'password';
    }

    // Enhanced User System
    let users = JSON.parse(localStorage.getItem('blaqxUsers')) || [];

    document.getElementById("userLogin").addEventListener("submit", function(e) {
      e.preventDefault();
      const email = this.querySelector('[type="email"]').value.trim();
      const password = this.querySelector('[type="password"]').value.trim();
      
      const user = users.find(u => u.email === email && u.password === password);
      if (user) {
        // Create session with expiration (24 hours)
        const sessionData = {
          email: user.email,
          balance: user.balance || 0,
          transactions: user.transactions || [],
          expires: Date.now() + 86400000
        };
        localStorage.setItem('blaqxSession', JSON.stringify(sessionData));
        window.location.href = "dashboard.html"; // Critical redirect
      } else {
        alert("‚ö†Ô∏è Invalid credentials. Try again or register.");
      }
    });

    // Enhanced Registration
    document.getElementById("registerLink").addEventListener("click", function(e) {
      e.preventDefault();
      const email = prompt("Enter your email:").trim();
      const password = prompt("Create a strong password:").trim();
      
      if (email && password.length >= 8) {
        const newUser = {
          email,
          password,
          balance: 0,
          transactions: [],
          joined: new Date().toISOString()
        };
        users.push(newUser);
        localStorage.setItem('blaqxUsers', JSON.stringify(users));
        alert("üéâ Registration successful! Please login.");
      } else {
        alert("‚ùå Invalid input. Password must be 8+ characters.");
      }
    });
  </script>
</body>
</html>
