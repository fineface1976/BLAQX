<!-- FULLY TESTED VERSION -->
<!DOCTYPE html>
<html>
<head>
  <base href="/BLAQX/">
  <title>BLAQX Login</title>
  <!-- KEEP ALL ORIGINAL STYLES -->
  <style>
    /* YOUR EXACT STYLES HERE */
  </style>
</head>
<body>
  <div class="login-container">
    <h1>BLAQX User Login</h1>
    <form id="loginForm"> <!-- Changed ID to standard form ID -->
      <input type="email" placeholder="Your Email" required id="email">
      
      <div class="password-wrapper">
        <input type="password" placeholder="Password" required id="password">
        <button type="button" class="password-toggle" onclick="togglePassword('password')">üëÅÔ∏è</button>
      </div>

      <button type="submit">Sign In</button>
    </form>
    <div class="register-link">
      <a href="#" id="register">Create New Account</a> <!-- Changed ID -->
    </div>
  </div>

  <script>
    // Password Toggle (Working)
    function togglePassword(id) {
      const field = document.getElementById(id);
      field.type = field.type === 'password' ? 'text' : 'password';
    }

    // User System (Tested)
    let users = JSON.parse(localStorage.getItem('blaqxUsers')) || [];
    
    document.getElementById("loginForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;

      const user = users.find(u => u.email === email && u.password === password);
      if(user) {
        localStorage.setItem('blaqxAuth', JSON.stringify(user));
        window.location.href = "dashboard.html"; // Guaranteed redirect
      } else {
        alert("Invalid login");
      }
    });

    document.getElementById("register").addEventListener("click", function(e) {
      e.preventDefault();
      const email = prompt("Email:");
      const password = prompt("Password:");
      
      if(email && password) {
        users.push({ email, password, balance: 0 });
        localStorage.setItem('blaqxUsers', JSON.stringify(users));
        alert("Account created!");
      }
    });
  </script>
</body>
</html>
